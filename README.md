# Comarques de Catalunya deck

## Genreating the images of each comarca
It was not possible to use ChatGPT to modify a raster file (png) to highlight each comarca, so I found SVG files I could manipulate.

- [catalunya-comarques.svg](svg/catalunya-comarques.svg) — A map of the comarques with the comarca names but not the capitals. It includes Moianès. (_[source](https://upload.wikimedia.org/wikipedia/commons/2/26/Comarcas_de_Catalu%C3%B1a.svg)_)
- [catalunya-toponims-original.svg](svg/catalunya-toponims-original.svg) — The map I end up using, including Municipis and more text. Does not include Moianès. (_[source](https://upload.wikimedia.org/wikipedia/commons/a/af/CatMCVPtoponims.svg)_)
- [LluçanèsACatalunya23.svg](svg/Llu%C3%A7an%C3%A8sACatalunya23.svg) — A map with Lluçanès and Moianès. (_[source](https://es.m.wikipedia.org/wiki/Archivo:Llu%C3%A7an%C3%A8sACatalunya23.svg)_)
- [catalunya.svg](svg/catalunya.svg) — The map used, manually manipulated. 

I did not explore using geojson or topojson, available at [catalonia-cartography](https://github.com/sirisacademic/catalonia-cartography) GitHub repo.

### New comarques
There are 42 comarques in 2025, and Aran considered a "unique territorial entity" (_entitat territorial singular_), according to [Wikipedia](https://en.wikipedia.org/wiki/Comarques_of_Catalonia). 

I had to use multiple maps and do manual transformations to incorporate Lluçanès and Moianès.

### Manipulating the SVG and creating PNG with Python
I used the libraries `lxml` and `cairosvg`.

```bash
$ python3 -m venv .venv
$ source .venv/bin/activate
$ pip install lxml
$ pip install cairosvg
```

- [list-comarques-svg.py](list-comarques-svg.py) — List the comarques in the SVG file.
- [convert-svg-to-png.py](convert-svg-to-png.py) — Convert a single SVG file to PNG, 800 pixels wide.
- [add_new_map.py](add_new_map.py) — Creates a new SVG from `catalunya.svg` adding the map from `LluçanèsACatalunya23.svg` with Lluçanès and Moianès.
- [generate-each-comarca.py](generate-each-comarca.py) — Generate a PNG file for each comarca, highlighting the border in red.

## Reordering the markdown
For matters of convenience, I wanted to reorder the markdown generated by ChatGPT:
- [reorder-catalunya-markdown.py](reorder_catalunya_comarques.py) — Reorder the markdown file alphabetically by the comarques name.

## Creatting the markdown
Prompt used with ChatGPT.

```markdown
Create a markdown file named catalunya.md. The heading of the file will be:

# Comarques de Catalunya
 
---

Deck: Comarques de Catalunya
Tags: catalunya


The footer of the file will be:

---

Generated by ChatGPT


For each of the comarques of Catalunya I want you to create two entries between the header and the footer. One entry asking for the capital of the comarca and the other entry asking for the comarca que city is capital of. Each entry needs a sequential number and I want the comarques processed in alphabetical order. Each entry will use the images generated previous ly. For both questions use the same image.

Use the following as an example of the entries:

1. Quina és la capital de la comarca del **Berguedà**?
> La capital de la comarca del Berguedà és **Berga**.
>
> ![Berguedà](images/bergueda.png)

2. De quina comarca **Berga** és la capital?
> Berga és la capital del **Berguedà**.
>
> ![Berguedà](images/bergueda.png)
```

## Load the Markdown into Anki
Use [inka2](https://github.com/sysid/inka2).